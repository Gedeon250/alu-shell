#!/usr/bin/env bash

PID_FILE="/var/run/my_process.pid"
COMMAND="$1"

# Function to start the process
start_process() {
  if [ -e "$PID_FILE" ]; then
    echo "Process is already running with PID $(cat "$PID_FILE")"
  else
    nohup ./manage_my_process &> /dev/null &  # Replace with actual process if needed
    echo "$!" > "$PID_FILE"
    echo "manage_my_process started with PID $(cat "$PID_FILE")"
  fi
}

# Function to stop the process
stop_process() {
  if [ -e "$PID_FILE" ]; then
    kill "$(cat "$PID_FILE")" && rm -f "$PID_FILE"
    echo "manage_my_process stopped"
  else
    echo "No running process found"
  fi
}

# Function to restart the process
restart_process() {
  stop_process
  start_process
}

# Command handling
case "$COMMAND" in
  start) start_process ;;
  stop) stop_process ;;
  restart) restart_process ;;
  *) echo "Usage: $0 {start|stop|restart}" ;;
esac

